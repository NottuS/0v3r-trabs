\chapter{Introdu\c{c}\~ao}
\label{Introducao}

%Quando ocorre uma falha em uma rede na qual os roteadores estam rodando o protocolo \textit{OSPF} informação deixa de ser transmitida. Os pacotes devem esperar o \textit{OSPF} encontrar um novo caminho para que possam ser novamente transmitidos. Sendo assim, a comunicação entre alguns roteadores da rede fica inativa. Como o \textit{OSPF} faz parte dos protocolos utilizados na Internet é essencial que este intervalo, no qual a comunicação fica inativa, seja o menor possível. Durante este intervalo os roteadores pertencentes a rede são informados que occoreu uma falha e devem encontrar um novo caminho. O novo caminho a ser encontrado deve ser mínimo. Uma solução para não interromper a comunicação na rede durante uma falha seria os roteadores utilizarem um caminho alternativo até que seja encontrado um novo caminho. O caminho alternativo não precisa ser mínimo, pois ele é um caminho temporário com a função de manter a comunicação da rede até todos os roteadores sejam informados de uma falha e encontrem um novo caminho mínimo. Entretanto é preciso analisar esta solução, verificar se ela é viável. Para isso é preciso implementar o novo algoritmo e comparar sua eficácia em relação ao \textit{OSPF}.

%O restante deste trabalho está organizado da seguinte maneira. O capítulo 2 descreve o funcionamento dos protocolos semelhantes ao \textit{OSPF}. Além disso, são analisadas as vantagens e os detalhes do \textit{OSPF}; como o \textit{OSPF} encontra o caminho mínimo entre os roteadores da redes e como acontece a troca de informações de controle entre os roteadores. O capítulo 3 descreve passo a passo como instalar e configurar o simulador \textit{NS-3} para que seja possível realizar simulações do \textit{OSPF}. O capítulo 4 mostra como utilizar o \textit{NS-3}; como criar a topologia da rede e configurar cada roteador para utilizar o protocolo \textit{OSPF}. Além disso são analisados os resultados obtidos nas simulações.

%O NS-3 permite executar a simulação de diversos protocolos. Um destes protocolos é o OSPF, que contribui para o roteamento de pacotes na Internet. É possível utilizar o NS-3 para observar o funcionamento do OSPF. Entretanto, nas simulações que ocorre uma falha de enlace todos os pacotes que passam por este enlace não chegam aos seus destinos. Esse comportamento se mantém por tempo indefinido. Sendo assim, é possível perceber que a implementação do protocolo OSPF, nativa do NS-3, é muito limitada. Uma vez que, quando um enlace falha, os roteadores da rede deveriam calcular novos caminhos. Porém isso não acontece nas simulações. Deste modo, o módulo do NS-3 chamado DCE passa a ser uma alternativa para simular o protocolo OSPF. O DCE possui a implementação do protocolo OSPF feita pela \textit{Quagga Routing Suite}. Ao utilizar o DCE, quando um enlace falha os roteadores encontram um novo caminho mínimo e os pacotes passam a utilizar este caminho.

A Internet é dividida em conjuntos de roteadores. Cada conjunto de roteadores está sob o controle de uma única entidade administrativa. Dentro destes conjuntos os roteadores trocam informações através do protocolo de roteamento interno. Além disso, os protocolos de roteamento são tipicamente classificados em dois tipos: vetor de distância e estado de enlace. O \textit{Open Shortest Pah First} (OSPF) \cite{Reference6} é um protocolos de roteamento interno do tipo estado de enlace. O OSPF utiliza descrições do estado dos enlaces da rede para criar um representação da topologia da rede na forma de um grafo. A partir dessa representação, os roteadores utilizam o algoritmo de Dijkstra \cite{Reference10} para calcular o caminho mínimo de uma origem para cada destino da rede. A criação e manutenção desta representação da topologia é feita, principalmente, por três subprotocolos que juntos formam o OSPF. O protocolo \textit{Hello} que tem o objetivo de verificar o estado dos enlaces e eleger um roteador designado e um roteador reserva. Quando dois roteadores estabelecem conectividade bidirecional, o protocolo \textit{Exchange} é reponsável pela sincronização da representação local da topologia da rede. Além disso, o protocolo \textit{Flooding} é reponsável por informar a todos os roteadores quando ocorre uma falha na rede.

 O \textit{Network Simulator 3} (NS-3) \cite{Reference12} é um simulador de eventos discretos, voltado principalmente para simulação de redes de computadores. O simulador NS-3 é um software livre disponível publicamente. O NS-3 é construído como um sistema de bibliotecas de \textit{software}. Estas bibliotecas são escritas na linguagem C++.
 
Este trabalho descreve como simular o OSPF no NS-3. Inicialmente é avaliado o uso do \textit{Global Route Manager} que é responsável por preencher as tabelas de roteamento do roteadores. Entretanto, o \textit{Global Route Manager} não implementa um protocolo de roteamento. Uma vez que, ele somente calcula caminhos estáticos, pois as tabelas de roteamento são preenchidas antes de iniciar o tráfego de pacotes na rede. Portanto, não são utilizados pacotes de controle e quando ocorre uma falha na rede os rotedores não são informados. Sendo assim, um módulo do NS-3 chamado \textit{Direct Code Execution} (DCE) passa a ser uma alternativa para simular o protocolo OSPF. O DCE permite executar aplicações reais dentro do NS-3 e uma destas aplicações a implementação do protocolo OSPF feita pela \textit{Quagga Routing Suite} \cite{Reference14}. O Quagga fornece implementações de protocolos de roteamento para as plataformas Unix. Ao executar as simulações é possível observar o comportamento do OSPF implementado no módulo DCE. O funcionamento da implementação do DCE é semelhante ao da implementação nativa do NS-3. Entretanto, é possível notar a diferença entre as duas implementações nas simulações em que ocorrem falhas na rede. Na implementação do NS-3 quando ocorre um falha de enlace, todos os pacotes que utilizavam o caminho afetado são perdidos. No OSPF do DCE somente alguns pacotes são perdidos, pois os roteadores percebem a falha do enlace e encontram um novo caminho mínimo.

Entretanto, o DCE não é nativo do NS-3 e isso adiciona complexidade ao procedimento de simular o OSPF. Caso o NS-3 seja instalado de acordo com sua documentação, o módulo DCE não é instalado e é necessário refazer a instalação para permitir o uso do DCE. Além disso, a maneira de configurar a simulação passa por diversas mudanças quando é utilizado o DCE e grande parte do conhecimento adquirido ao utilizar o NS-3 se torna obsoleto. De fato, usar o DCE implica em trabalhar com a própria implementação do protocolo no sistema operacional, o que elimina a vantagem da simulação, na medida em que múltiplos detalhes devem ser considerados mesmo para testes simples. Além disso, a documentação do DCE, especialmente a parte relacionada ao OSPF, é insuficiente e incompleta.

O restante deste trabalho está organizado da seguinte maneira. O capítulo 2 descreve as características do protocolo OSPF. O capítulo 3 descreve os procedimentos necessários para instalar e configurar o NS-3 para simular o OSPF. O capítulo 4 descreve execução de simulações do protocolo OSPF no NS-3 e o uso do DCE. Finalmente, o capítulo 5 traz as conclusões.
