\chapter{Conclus\~ao}
\label{Conclusao}

%O protocolo \textit{OSPF} é composto por três subprotocolos. Os três são essenciais para o funcionamento correto do \textit{OSPF}. Entretanto o simulador \textit{NS-3} possui a implementação de somente um desses protocolos, o protocolo \textit{Exchange}. Este é o protocolo responsável pela sincronização de dados entre os roteadores. Ele é essencial para que cada roteador mantenha uma representação local da topologia da rede idêntica aos demais. Deste modo todos os roteadores encontram caminhos mínimos iguais. Com isso é possível fazer o roteamento dos pacotes sem que ocorram ciclos. Porém sem a implementação dos outros portocolos que compôem o \textit{OSPF} a rede não suporta falhas. Caso um enlace falhe os roteadores da rede não serão informados. Portanto não é calculado um novo caminho mínimo e os caminhos que utilizam o enlace falho se tornam inutilizáveis. Para realizar simulações de redes dinâmicas é necessário utilizar o módulo \textit{DCE}. Este módulo fornece o protocolo \textit{OSPF} implementado pela \textit{Quagga Routing Suite}. Deste modo nas simulações com falhas os roteadores são informados e calculam novos caminhos mínimos.

%A topologia da rede utilizada nas simulações é pequena e simples. Para montar um base de dados sobre o comportamento do protocolo \textit{OSPF} é importante realizar simulações em redes maiores e complexas. Além disso, é interessante estudar a implementação do protocolo \textit{OSPF}, feita pela \textit{Quagga Routing Suite}, para explorar as causas do intervalo gasto para calcular um novo caminho mínimo. Em seguida, após a análise dos resultados, propor e implementar uma solução para diminuir ou remover o tempo gasto para encontrar um novo caminho mínimo. Com o objetivo de reduzir o intervalo que a rede deixa de enviar pacotes durante a falha de um enlace.

%Os resultados foram obtidos através de simulações realizadas na topologia descrita no início do capítulo. Para simular rede maiores é  usar geradores de topologia, para não precisar configurar cada roteador manualmente. Atualmente existe um módulo do NS-3 chamado \textit{Boston university Representative Internet Topology gEnerator} (BRITE) que tem a função de gerar grandes topologias. Entretanto, este módulo não faz integração com o módulo DCE. Ou seja, ao utilizar este módulo para criar a topologia da rede os roteadores não podem executar o protocolo OSPF fornecido pelo DCE.

A Internet é organizada em regiões chamadas sistemas autônomos. Os protocolos responsáveis pelo roteamento dentro dos sistemas autônomos são chamados de protocolos de roteamento interno. Um destes protocolos utilizado atualmente é o OSPF. Além disso, este protocolo pertence a uma classe conhecida como estado de enlace. O OSPF utiliza descrições do estado dos enlaces da rede para criar uma representação da topologia da rede na forma de um grafo. A partir dessa representação, os roteadores utilizam o algoritmo de Djikstra para calcular o caminho mínimo de uma origem para cada destino da rede. A criação e manutenção desta representação da topologia é feita por três subprotocolos que juntos formam o OSPF. O protocolo \textit{Hello} tem o objetivo de verificar o estado dos enlaces e eleger um roteador designado e um roteador reserva. Quando dois roteadores estabelecem conectividade bidirecional, o protocolo \textit{Exchange} é reponsável pela sincronização da representação local da topologia da rede. O protocolo \textit{Flooding} é reponsável por informar a todos os roteadores quando ocorre uma falha na rede.

Neste trabalho descrevemos como simular o OSPF no NS-3. Inicialmente é avaliado o uso do \textit{Global Route Manager} que é resposável por preencher as tabelas de roteamento do roteadores. Entretanto, o \textit{Global Route Manager} não implementa um protocolo de roteamento. Uma vez que, ele somente calcula caminhos estáticos, pois as tabelas de roteamento são preenchidas antes de iniciar o tráfego de pacotes na rede. Portanto, não são utilizados pacotes de controle e quando ocorre uma falha na rede os rotedores não são informados. Sendo assim, é possível perceber que a implementação nativa do NS-3 é muito limitada. Uma vez que, quando um enlace falha, os roteadores da rede não encontram novos caminhos. Fica claro que o funcionamento dos subprotocolos \textit{Hello} e \textit{Flooding} não são simulados. Portanto, um módulo do NS-3 chamado DCE passa a ser uma alternativa para simular o protocolo OSPF. O DCE fornece a implementação do protocolo OSPF feita pela \textit{Quagga Routing Suite}. O Quagga possui a implementação dos três subprotocolos do OSPF. Portanto, os roteadores descobrem quando ocorre uma falha na rede e encontram um novo caminho mínimo.

Realizar simulações do OSPF usando a implementação feita pelo Quagga apresenta uma série de desafios. Como o DCE não é nativo do NS-3 o procedimento de simular o OSPF se torna mais complexo. A maneira de configurar a simulação passa por diversas mudanças quando é utilizado o DCE. Deste modo, grande parte do conhecimento adquirido ao utilizar o NS-3, sem o DCE, se torna obsoleto. Ao consultar a documentação do DCE para compreender alguns dos procedimentos usados na configuração das novas simulações é possível perceber que a documentação do DCE, especialmente a parte relacionada ao OSPF, é insuficiente e incompleta. Na verdade, usar o DCE implica em trabalhar com a própria implementação do protocolo no sistema operacional, o que elimina a vantagem da simulação, na medida em que múltiplos detalhes devem ser considerados mesmo para testes simples. O pesquisador, em geral, recorre a uma simulação para obter resultados de forma simples e direta, sem que seja necessário analisar os detalhes das implementações. Assim, é possível concluir que o trabalho futuro necessário, para permitir a continuidade deste trabalho, é implementar o OSPF no NS-3.



%As simulações foram realizadas com uma topologia simples. Para simular rede complexas é necessário utilizar geradores de topologia. Caso contrário cada roteador deve ser configurado manualmente. Atualmente existe um módulo do NS-3 chamado \textit{Boston university Representative Internet Topology gEnerator} (BRITE) que tem a função de gerar grandes topologias. Entretanto, este módulo não faz integração com o módulo DCE. Ou seja, ao utilizar o módulo BRITE para criar a topologia da rede os roteadores não podem executar o protocolo OSPF fornecido pelo DCE.
