%O protocolo \textit{Open Shortest Path First (OSPF)} é responsável por uma parte do roteamento de pacotes na Internet. Portanto ele deve ser efetivo, cumprir sua função de modo eficaz. Este trabalho descreve simulações do \textit{OSPF} com o objetivo de analisar se é possível melhorar a eficácia do protocolo. Através das simulações é possível estudar o comportamento do \textit{OSPF}. Para isso é utilizado o simulador \textit{Network Simulator 3 (NS-3)}. Antes de realizar as simulações é necessário entender as características do protocolo \textit{OSPF} e do simulador \textit{NS-3}. Além disso é apresentado um módulo do \textit{NS-3} chamado \textit{Direct Code Execution (DCE)}. O \textit{DCE} oferece facilidades para executar, dentro do \textit{NS-3}, a implementação protocolo \textit{OSPF} feita pela \textit{Quagga Routing Suite}.

O protocolo \textit{Open Shortest Path First} (OSPF) é um dos protocolos de roteamento mais importantes da Internet. Os roteadores que utilizam o OSPF mantêm uma representação local da topologia da rede na forma de um grafo. A partir dessa representação, os roteadores utilizam o algoritmo de Djikstra para calcular o caminho mínimo de uma origem para cada destino da rede. A criação e manutenção desta representação da topologia é feita por três subprotocolos que juntos formam o OSPF. Cada um desses protocolos tem uma função, incluindo verificar se a comunicação com os roteadores vizinhos está operacional e informar todos os roteadores que ocorreu uma falha na rede. O \textit{Network Simulator 3} (NS-3) é um simulador de eventos discretos, voltado principalmente para simulação de redes de computadores. O simulador NS-3 é um software livre disponível publicamente. O NS-3 é construído como um sistema de bibliotecas de \textit{software}. Estas bibliotecas são escritas na linguagem C++. Este trabalho descreve como simular o OSPF no NS-3. Inicialmente é avaliada a possibilidade de usar uma implementação do OSPF nativa do NS-3. Entretanto, o NS-3 não possui o OSPF implementado. Sendo assim, um módulo do NS-3 chamado \textit{Direct Code Execution} (DCE) passa a ser uma alternativa para simular o protocolo OSPF. O DCE permite executar aplicações reais dentro do NS-3. Uma destas aplicações é a implementação do protocolo OSPF feita pela \textit{Quagga Routing Suite}. Portanto, o DCE fornece uma implementação completa do OSPF. Entretanto, o DCE não é nativo do NS-3 e isso adiciona complexidade ao procedimento de simular o OSPF. Na verdade, usar o DCE implica em trabalhar com a própria implementação do protocolo no sistema operacional, o que elimina a vantagem da simulação, na medida em que múltiplos detalhes devem ser considerados mesmo para testes simples. Além disso, a documentação do DCE, especialmente a parte relacionada ao OSPF, é insuficiente e incompleta.

%Se o NS-3 foi instalado de acordo com sua documentação o módulo DCE não é instalado e será necessário refazer a instalação para permitir o uso do DCE. Além disso, a maneira de configurar a simulação passa por diversas mudanças quando é utilizado o DCE e grande parte do conhecimento adquirido ao utilizar o NS-3 se torna obsoleto.

%Primeiramente, se o NS-3 foi instalado de acordo com sua documentação o módulo DCE não é instalado. Portanto, será necessário refazer a instalação do NS-3 para permitir o uso do DCE. Além disso, a maneira de configurar a simulação passa por diversas mudanças quando é utilizado o DCE. Deste modo, grande parte do conhecimento adquirido ao utilizar o NS-3, sem o DCE, se torna obsoleto. Sendo assim, é necessário consultar a documentação do DCE para compreender alguns dos procedimentos usados na configuração das novas simulações. Porém a documentação do DCE, especialmente a parte relacionada ao OSPF, é insuficiente e incompleta. Além disso, alguns procedimentos exigem conhecimento de executáveis externos ao NS-3 como, por exemplo para configurar as interfaces de rede dos roteadores é preciso conhecer o executável ``ip''.

%Na implementação do NS-3 existe um conjunto de classes que tem o objetivo de simular o funcionamento do protocolo OSPF. Como foi visto anteriormente, o protocolo OSPF é dividido em três subprotocolos: os protocolos \textit{Hello}, \textit{Exchange} e \textit{Flooding}. Entretanto, a implementação do simulador NS-3 não simula o funcionamento dos protocolos \textit{Hello} e \textit{Flooding}. Detectamos no decorrer dos experimentos realizados que somente o funcionamento do protocolo \textit{Exchange} é implementado no NS-3. Sendo assim, o NS-3 não simula o funcionamento completo do protocolo OSPF. Deste modo, o estudo do protocolo OSPF fica muito limitado. Para aprofundar a análise do OSPF é necessário o uso de uma ferramenta adicional. Existe um módulo para o simulador NS-3 chamado \textit{Direct Code Execution} (DCE) \cite{Reference13}. O módulo DCE permite a execução de algumas aplicações reais dentro do NS-3. Umas das aplicações que o DCE fornece suporte é a implementação do protocolo OSPF presente na \textit{Quagga Routing Suite} \cite{Reference14}. Ao utilizar o módulo DCE é possível ampliar o estudo do protocolo OSPF e deixa-lo mais abragente.

%É possível perceber nas simulações que quando ocorre uma falha os pacotes que utilizam o caminho falho não chegam aos seus destinos. Ao utilizar um aplicação para gerar tráfego no caminho com falha é posível observar que os pacotes são enviados porém nao são recebidos. Esse comportamento se mantém por tempo indefinido. Deste modo, é possível perceber que a implementação do protocolo OSPF, nativa do NS-3, é muito limitada. Uma vez que, quando um enlace falha, os roteadores da rede deveriam calcular novos caminhos. Porém isso não acontece nas simulações. Neste ponto é perceptível que não estão implementados os protocolos \textit{Hello} e \textit{Flooding}. Somente o protocolo \textit{Exchange} está implementado no NS-3. Sendo assim, o módulo DCE passa a ser uma alternativa para simular o protocolo OSPF. Pois o DCE possui a implementação do protocolo OSPF feita pela \textit{Quagga Routing Suite}. No DCE todos os subprotocolos que compôem o OSPF estão implementados. Portanto, é possível executar simulações com falhas na redes.

%O DCE fornece uma implementação completa do OSPF. Entretanto, o DCE não é nativo do NS-3 e isso adiciona complexidade ao procedimento simular o OSPF. Primeiramente, se o NS-3 foi instalado de acordo com sua documentação o módulo DCE não é instalado. Portanto, será necessário refazer a instalação do NS-3 para permitir o uso do DCE. Além disso, a maneira de configurar a simulação passa por diversas mudanças quando é utilizado o DCE. Deste modo, grande parte do conhecimento adquirido ao utilizar o NS-3, sem o DCE, se torna obsoleto. Sendo assim, é necessário consultar a documentação do DCE para compreender alguns dos procedimentos usados na configuração das novas simulações. Porém a documentação do DCE, especialmente a parte relacionada ao OSPF, é insuficiente e incompleta. Além disso, alguns procedimentos exigem conhecimento de executáveis externos ao NS-3 como, por exemplo para configurar as interfaces de rede dos roteadores é preciso conhecer o executável ``ip''.
